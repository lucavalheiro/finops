(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73389,71301],{73389:function(e,t,r){"use strict";r.d(t,{Z:function(){return eA}});var n,o,a,s=r(52322),i=r(2784),d=r(97729),l=r.n(d),c=r(87093),u=r(5632),p=r(30129),f=r(17422),g=r(87394),h=r(72524),m=r(28135),v=r(66351),b=r(59911),w=r(17731),_=r(88703),y={text:"Go to Storylane",link:"https://www.storylane.io"},j=r(58880),P=r(86101),S=r(54455),x=r.n(S),I=function(e){var t=e.text,r=e.tooltipContent,n=e.href;return(0,s.jsxs)(P.Z,{disabled:!r,triggerOn:"hover",children:[(0,s.jsx)(P.Z.Trigger,{children:(0,s.jsxs)("a",{href:n,target:"_blank",rel:"noreferrer noopener",className:x().headerLink,children:[(0,s.jsx)(j.Z,{name:"expand-open",className:x().icon,width:14,height:14}),(0,s.jsx)("span",{children:t})]})}),(0,s.jsx)(P.Z.Content,{variant:"dark",children:r})]})},E=r(746),k=r.n(E),R=r(82998),M=r(70865),C=r(96670),N=r(26297),Z=r(87939),F=r.n(Z),L=function(e){var t=e.disabledAuthenticatedTooltip;return(0,s.jsxs)(P.Z,{disabled:t,placement:"top",triggerOn:"hover",offsetY:10,children:[(0,s.jsx)(P.Z.Trigger,{children:(0,s.jsx)(j.Z,{name:"logo-horizontal",className:F().logo})}),(0,s.jsx)(P.Z.Content,{variant:"dark",children:(0,s.jsx)("span",{children:"Click to add your organization logo"})})]})},U=r(64050),D=r.n(U),q=function(e){var t=e.linkElement,r=e.title,n=e.hrefUrl,o=e.logoSrc,a=e.disabledAuthenticatedTooltip;return(0,s.jsxs)("header",{className:D().root,children:[(0,s.jsx)("a",{className:D().logoContainer,href:n,"data-testid":"white-label-href",children:o?(0,s.jsx)("img",{src:o,className:D().logo,alt:r||"Storylane demo","data-testid":"white-label-logo"}):(0,s.jsx)(L,{disabledAuthenticatedTooltip:a})}),(0,s.jsx)("h1",{className:D().title,children:(0,s.jsx)("span",{children:r})},"header-".concat(r)),(0,s.jsx)("div",{className:D().linkContainer,children:(0,s.jsx)("span",{className:D().link,children:t},"header-link")})]})},A=r(84868),W=r.n(A),T=function(e){var t=e.children,r=e.linkElement,n=e.showFooterLinkElement,o=(0,N.Z)(e,["children","linkElement","showFooterLinkElement"]);return(0,s.jsxs)("div",{className:W().root,children:[(0,s.jsx)(q,(0,C.Z)((0,M.Z)({},o),{linkElement:r})),(0,s.jsx)("div",{className:W().body,children:t}),n&&(0,s.jsx)("div",{className:W().footer,children:r})]})},O=r(70154),z=r.n(O),H=function(e){var t=e.children,r=(0,N.Z)(e,["children"]);return(0,s.jsxs)("div",{className:z().root,children:[(0,s.jsx)("div",{className:z().header,children:(0,s.jsx)(q,(0,M.Z)({},r))}),(0,s.jsx)("div",{className:z().body,children:t})]})},B=r(47162),Q=r(7463),K=function(){var e=(0,Q.Z)({eventAction:B.Y.StorylaneShareUserId,postMessageAction:B.L.RequestUser}).eventData,t=null==e?void 0:e.company_id;return{isLoggedIn:Boolean(null==e?void 0:e.user_id),extensionCompanyId:t}},G=r(98788),J=r(22970),V=r(9669),Y=r.n(V),X=r(66680),$=r(24845),ee=r(90449),et=r(81045),er=r(27421),en=r(47842),eo=function(e,t){switch(t.type){case"requestSecret/notFound":return(0,C.Z)((0,M.Z)({},e),{secretStatus:"none"});case"requestProject/pending":return(0,C.Z)((0,M.Z)({},e),{projectRequestStatus:"pending"});case"requestProject/fulfilled":return(0,C.Z)((0,M.Z)({},e),{projectRequestStatus:"fulfilled",project:t.payload.project,apiError:null,pageStatus:"resolvedProject",secretStatus:"none"});case"requestProject/rejected":return(0,C.Z)((0,M.Z)({},e),{projectRequestStatus:"rejected",apiError:t.payload.error,secretStatus:t.payload.error.isNotAuthenticated?"rejected":e.secretStatus});case"userEnabledPresenterNotes":if("resolvedProject"===e.pageStatus)return(0,C.Z)((0,M.Z)({},e),{presenterNotesStatus:"active"});return console.warn("userEnabledPresenterMode action is called, but pageStatus is not resolvedProject",e),e;case"userEnabledPresenterMode":if("resolvedProject"===e.pageStatus)return(0,C.Z)((0,M.Z)({},e),{presenterModeStatus:"pending"});return console.warn("userEnabledPresenterMode action is called, but pageStatus is not resolvedProject",e),e;case"presenterModeReloadFinished":if("resolvedProject"===e.pageStatus&&"pending"===e.presenterModeStatus)return(0,C.Z)((0,M.Z)({},e),{presenterModeStatus:"active"});return console.warn("presenterModeReloadFinished action is called, but pageStatus is not resolvedProject",e),e;default:return e}},ea=function(e){var t,r;return{project:e.project,apiError:e.apiError||null,projectRequestStatus:"idle",secretStatus:(null===(t=e.apiError)||void 0===t?void 0:t.isNotAuthenticated)?"initializing":"none",pageStatus:(null===(r=e.apiError)||void 0===r?void 0:r.isNotAuthenticated)?"authIsRequired":"resolvedProject",presenterModeStatus:"none",presenterNotesStatus:"none"}},es=r(72125),ei=r(75762);(a=n||(n={})).Debug="debug",a.Responsive="responsive",a.DemoSessionId="demo_session_id";var ed,el=(0,i.createContext)(null),ec=function(e){var t=e.children,r=e.state,n=e.onUserEnabledPresenterMode,o=e.onUserEnabledPresenterNotes,a=e.onPresenterModeReloadFinished,d=(0,i.useMemo)(function(){return{state:r,onUserEnabledPresenterMode:n,onUserEnabledPresenterNotes:o,onPresenterModeReloadFinished:a}},[r,n,o,a,]);return(0,s.jsx)(el.Provider,{value:d,children:t})},eu=function(){var e=(0,i.useContext)(el);if(!e)throw Error("useSharePageState must be used within a SharePageStateProvider");return e},ep=function(e){var t,r=e.shareId,o=e.projectInfo,a=e.whitelabelSettings,d=e.secret,l=e.httpReferer,c=(0,u.useRouter)(),p=eu().state,f="true"===(0,u.useRouter)().query[n.Responsive],j=(0,R.Q)(c.asPath);d&&j.set(_.d.Secret,d),l&&j.set(_.d.ShareHTTPReferer,l),("pending"===p.presenterModeStatus||"active"===p.presenterModeStatus)&&j.set(_.d.HideContent,"true");var P=c.pathname.startsWith("/offline/");j.set(_.d.Embed,_.n.Inline);var S=K().isLoggedIn,x=f||o.feature_flags.responsive_image_demo_player,E=(0,g.Z)((0,h.L)({data:{display_config:o.display_config,dimensions:o.dimensions,isResponsive:x}}),2),M=E[0],C=E[1],N=o.display_config.renderer_title||o.name,Z=a.header_link_text===y.text&&a.header_link_url===y.link,F=Boolean(a.header_link_url&&a.header_link_text),L=(0,i.useMemo)(function(){if(!F)return null;var e=a.header_link_url||v.Z.SignUp,t=null;return S&&Z?(e=v.Z.TeamSettings,t=(0,s.jsx)("span",{children:"Click to customize the text"})):t=(0,s.jsx)("span",{children:a.header_link_text}),(0,s.jsx)(I,{text:a.header_link_text,href:e,tooltipContent:t},"whitelabel-link")},[F,S,Z,a]),U=(0,i.useMemo)(function(){return S&&a.logo_href?a.logo_href:S&&!a.logo_href?"".concat("https://app.storylane.io").concat(v.Z.TeamSettings):(S||a.logo_href)&&(null==a?void 0:a.logo_href)||b.tg},[S,a]),D=(0,w.u)(o.display_config,o.dimensions),q=D.height>D.width;return(0,s.jsx)(q?H:T,{logoSrc:a.logo,title:N,hrefUrl:U,linkElement:L,showFooterLinkElement:F,disabledAuthenticatedTooltip:!S,children:(0,s.jsx)("div",{ref:M,className:k().embedDemoContainerInner,children:(0,s.jsx)("div",{className:k().embedDemoWrapper,style:C,children:(0,s.jsx)(h.Z,{url:(0,m.A)({shareId:r,path:P?"demo/offline":"demo",baseUrl:"",search:"?".concat(j)}),imageDimensions:null!==(t=o.display_config.renderer_dimensions)&&void 0!==t?t:o.dimensions,imageFrame:o.display_config.renderer_border_color,testId:"share-embed-demo",isResponsive:x})})})})},ef=r(60281),eg=r(13949),eh=r.n(eg),em=r(83564);(ed=o||(o={})).EmbedDebug="embedDebug";var ev=function(e){var t=e.shareId,r=e.projectInfo,n=e.secret,a=e.httpReferer,i=(0,u.useRouter)(),d=eu().state,c=(0,R.Q)(i.asPath),p=i.pathname.startsWith("/offline/"),f=new URLSearchParams(c.toString());n&&f.set(_.d.Secret,n),a&&f.set(_.d.ShareHTTPReferer,a),("pending"===d.presenterModeStatus||"active"===d.presenterModeStatus)&&f.set(_.d.HideContent,"true");var g=c.get(o.EmbedDebug),h=(0,em.w)({displayConfigRendererDimensions:r.display_config.renderer_dimensions,startPageDimensions:r.dimensions,queryFlagScale:"true"===c.get("scale"),projectFlagScale:r.display_config.auto_scale});if(g||h){f.delete(o.EmbedDebug),f.set(_.d.Embed,_.n.Inline);var v=(0,m.A)({shareId:t,path:p?"demo/offline":"demo",baseUrl:"",search:"?".concat(f.toString())});return(0,s.jsx)("div",{className:eh().root,children:(0,s.jsxs)("div",{className:eh().embedDemoContainer,children:[(0,s.jsx)(l(),{children:(0,s.jsx)("link",{rel:"preload",as:"document",href:v})}),(0,s.jsx)(ef.Z,{url:v,testId:"share-embed-demo",isBorderless:!0})]})})}var b=(0,m.A)({shareId:t,path:p?"demo/offline":"demo",baseUrl:"",search:"?".concat(f.toString())});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l(),{children:(0,s.jsx)("link",{rel:"preload",as:"document",href:b})}),(0,s.jsx)(ef.Z,{testId:"share-html-embed-demo",url:b,isBorderless:!0})]})},eb=r(81761),ew=r(42051),e_=r(98437),ey=r(36260),ej=r(34448),eP=r(10509),eS=r(35138),ex=r(35011),eI=r(11998),eE=r(85888),ek=r.n(eE),eR=function(e){var t=e.title,r=e.submitButtonText,n=e.description,o=e.handleOpenNotes,a=e.handleCloseNotes,i=e.isLoading;return(0,s.jsxs)("div",{className:ek().root,children:[i&&(0,s.jsx)("div",{className:ek().loadingOverlay,children:(0,s.jsx)(eI.Z,{className:ek().loadingSpinner,size:60})}),(0,s.jsx)("div",{className:ek().title,children:t}),(0,s.jsx)("div",{className:ek().content,children:n}),(0,s.jsxs)("div",{className:ek().buttonWrapper,children:[(0,s.jsx)(ex.Z,{onClick:a,variant:"outline",disabled:i,children:"NOT NOW"}),(0,s.jsx)(ex.Z,{onClick:o,variant:"grey",disabled:i,children:r})]}),(0,s.jsxs)("div",{className:ek().visibleIconWrapper,children:[(0,s.jsx)(j.Z,{className:ek().eyeIcon,name:"eye2",width:15,height:15}),(0,s.jsx)("span",{className:ek().visibleText,children:"Only visible to you"})]})]})},eM=r(539),eC=r.n(eM),eN=function(e){var t=e.onClick;return(0,s.jsx)("div",{className:eC().root,onClick:t,children:(0,s.jsx)(j.Z,{name:"notes-filled",width:16,height:16})})},eZ=function(e){var t=e.onOpenNotesClick,r=e.onCloseNotesClick,n=e.onVisibilityTogglerClick,o=e.state;if("disabled"===o.value)return null;if("toggler"===o.displayModal)return(0,s.jsx)(eN,{onClick:n});if(("active"===o.value||"waitingForDemoIframeReload"===o.value||"waitingForUserEnabledPresenterMode"===o.value)&&"modal"===o.displayModal){var a="",i="",d="";return"presenter-mode"===o.mode?(a="Enable Presenter Mode",i="enable",d="View private presenter note in a separate tab while auto-hiding all guides during your presentation."):"presenter-notes"===o.mode&&(a="Presenter Note",i="Open Notes",d="There is a presenter note on this demo. Open it in a separate tab, that only you can see."),(0,s.jsx)(eR,{title:a,description:d,submitButtonText:i,handleOpenNotes:t,handleCloseNotes:r,isLoading:"waitingForDemoIframeReload"===o.value})}return null},eF=(0,i.createContext)(null),eL=function(e){var t=e.children,r=(0,i.useMemo)(function(){return{state:e.state}},[e.state]);return(0,s.jsx)(eF.Provider,{value:r,children:t})};function eU(e,t){switch(t.type){case"isChromeExtensionLoggedIn":if("waitingForLoggedIn"===e.value)return(0,C.Z)((0,M.Z)({},e),{value:"presenter-mode"===e.mode?"waitingForUserEnabledPresenterMode":"active",displayModal:"modal"});return e;case"userActivatedPresenterMode":if("waitingForUserEnabledPresenterMode"===e.value)return(0,C.Z)((0,M.Z)({},e),{value:"waitingForDemoIframeReload",displayModal:"modal"});if("active"===e.value)return(0,C.Z)((0,M.Z)({},e),{displayModal:"toggler"});return e;case"demoIframeReloaded":if("waitingForDemoIframeReload"===e.value)return(0,C.Z)((0,M.Z)({},e),{value:"active",displayModal:"toggler"});return e;case"userActivatedPresenterNotes":if("active"===e.value)return(0,C.Z)((0,M.Z)({},e),{displayModal:"toggler"});return e;case"userClickedToggler":if("toggler"===e.displayModal)return(0,C.Z)((0,M.Z)({},e),{displayModal:"modal"});return e;case"userClosedModal":if("active"===e.value&&"modal"===e.displayModal||"waitingForUserEnabledPresenterMode"===e.value&&"modal"===e.displayModal)return(0,C.Z)((0,M.Z)({},e),{displayModal:"toggler"});return e;default:throw Error("Presenter notes modal state reducer: unknown action")}}var eD=r(91358),eq=function(e){var t,r,n,o,a,d,l,u,p,f,g=e.projectInfo,h=g.id,m=(t={isPresenterNotesAvailable:g.presenter_notes_available&&g.kind===c.lI.Html,isPresenterGuidesMode:g.presenter_mode},n=(r=(0,i.useReducer)(eU,t,function(e){var t=e.isPresenterNotesAvailable||e.isPresenterGuidesMode,r=null;return e.isPresenterGuidesMode?r="presenter-mode":e.isPresenterNotesAvailable&&(r="presenter-notes"),{value:t?"waitingForLoggedIn":"disabled",mode:r,displayModal:null}}))[0],o=r[1],a=(0,i.useCallback)(function(){o({type:"isChromeExtensionLoggedIn"})},[]),d=(0,i.useCallback)(function(){o({type:"userActivatedPresenterMode"})},[]),l=(0,i.useCallback)(function(){o({type:"userActivatedPresenterNotes"})},[]),u=(0,i.useCallback)(function(){o({type:"userClosedModal"})},[]),p=(0,i.useCallback)(function(){o({type:"userClickedToggler"})},[]),f=(0,i.useCallback)(function(){o({type:"demoIframeReloaded"})},[]),{state:n,onChromeExtensionLoggedIn:a,onUserActivatedPresenterMode:d,onUserActivatedPresenterNotes:l,onUserClosedModal:u,onUserClickedToggler:p,onDemoIframeReloaded:f}),b=m.state,w=m.onChromeExtensionLoggedIn,_=m.onUserActivatedPresenterNotes,y=m.onUserActivatedPresenterMode,j=m.onUserClosedModal,P=m.onUserClickedToggler,S=m.onDemoIframeReloaded,x=K(),I=x.isLoggedIn,E=x.extensionCompanyId,k=I&&E===g.company_id;(0,i.useEffect)(function(){k&&w()},[k,w]);var R,M,C,N,Z,F,L,U,D,q,A,W,T,O,z,H,B,Q,G,J,V,Y,X,et,er,en,eo,ea,es,ei,ed,el,ec,ep,ef,eg,eh,em,ev,eb,ew,e_,ey,ej=(0,i.useRef)(null),eP=(M=(R={projectId:h,presenterDashboardWindowRef:ej,onUserActivatedPresenterNotes:_,disabled:"disabled"===b.value||null===b.mode||"presenter-mode"===b.mode}).projectId,C=R.presenterDashboardWindowRef,N=R.onUserActivatedPresenterNotes,Z=R.disabled,F=eu().onUserEnabledPresenterNotes,T=(U=(L={presenterDashboardWindowRef:C,disabled:Z}).presenterDashboardWindowRef,D=L.disabled,A=(q=(0,i.useState)(null))[0],W=q[1],(0,i.useEffect)(function(){if(!D){var e=function(e){if((0,ee.J)(e)&&e.data.message===$.mr&&e.data.payload.event===$.rc.PageChanged){var t,r;W(e.data.payload.page.id),null===(t=U.current)||void 0===t||t.postMessage((r={id:e.data.payload.page.id},(0,ee.g)("presenter-notes-page",r)),"https://app.storylane.io")}};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}},[U,D]),{currentPageId:A}).currentPageId,{handleOpenPresenterNotes:(0,i.useCallback)(function(){var e,t,r,n;if(N(),F(),C.current&&!1===C.current.closed){C.current.focus();return}C.current=(r=new URLSearchParams,T&&r.set("page_id",T),r.set("presenter_notes","true"),(n=window.open("".concat("https://app.storylane.io").concat(v.Z.PresenterNotes.replace(":projectId",M),"?").concat(r.toString()),"presenter-notes",(0,eD.V)(900,650)))&&n.focus(),n)},[F,N,C,T,M,])}).handleOpenPresenterNotes,eS=(z=(O={state:b,presenterDashboardWindowRef:ej,projectId:h,onUserActivatedPresenterMode:y,onDemoIframeReloaded:S,disabled:"disabled"===b.value||null===b.mode||"presenter-notes"===b.mode}).presenterDashboardWindowRef,H=O.projectId,B=O.state,Q=O.onUserActivatedPresenterMode,G=O.onDemoIframeReloaded,J=O.disabled,Y=(V=eu()).state,X=V.onUserEnabledPresenterMode,el=(er=(et={disabled:J}).disabled,eo=(en=eu()).state,ea=en.onPresenterModeReloadFinished,ei=(es=(0,i.useState)(null))[0],ed=es[1],(0,i.useEffect)(function(){if(!er&&"pending"===eo.presenterModeStatus){var e=function(e){if((0,ee.J)(e)&&e.data.message===$.mr&&e.data.payload.event===$.rc.ProjectResolved){var t,r=function(e){var t;(0,ee.J)(e)&&"presenter-mode-demo-init-response"===e.data.message&&(ea(),ed({widgetId:e.data.payload.widgetId,pageId:e.data.payload.pageId}),window.removeEventListener("message",r))};window.addEventListener("message",r),null===(t=e.source)||void 0===t||t.postMessage((0,ee.g)("presenter-mode-demo-request-state",{}),{targetOrigin:globalThis.origin})}};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}},[eo.presenterModeStatus,ea,ed,er,]),{initialFrameState:ei}).initialFrameState,ew=(ep=(ec={presenterDashboardWindowRef:z,disabled:J,state:B}).presenterDashboardWindowRef,ef=ec.disabled,eg=ec.state,em=(eh=(0,i.useState)(null))[0],ev=eh[1],eb=(0,i.useRef)(!1),(0,i.useEffect)(function(){if(!ef&&"waitingForDemoIframeReload"===eg.value){var e=function(e){(0,ee.J)(e)&&e.data.message===$.mr&&e.data.payload.event===$.rc.ProjectResolved&&(eb.current=!0)};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}},[ef,eg.value]),(0,i.useEffect)(function(){if(!ef){var e=function(e){if(!1!==eb.current&&(0,ee.J)(e)&&e.data.message===$.mr&&e.data.payload.event===$.rc.WidgetChanged){var t,r;ev(e.data.payload.step.id),null===(t=ep.current)||void 0===t||t.postMessage((r={id:e.data.payload.step.id,index:e.data.payload.step.index},(0,ee.g)("presenter-notes-widget",r)),"https://app.storylane.io")}};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}},[ep,ef]),{currentWidgetId:em}).currentWidgetId,e_=(0,i.useCallback)(function(){if(!el)throw Error("Initial frame state is not set");var e,t,r,n,o,a,s={widgetId:el.widgetId,pageId:el.pageId};ew&&(el.widgetId=ew,el.pageId=null),(!z.current||!1!==z.current.closed)&&(z.current=(t=(e={initialWidgetId:s.widgetId,initialPageId:s.pageId,projectId:H}).projectId,r=e.initialPageId,n=e.initialWidgetId,(o=new URLSearchParams).set("presenter_mode","true"),n&&o.set("widget_id",n),r&&o.set("page_id",r),(a=window.open("".concat("https://app.storylane.io").concat(v.Z.PresenterNotes.replace(":projectId",t),"?").concat(o.toString()),"presenter-mode",(0,eD.V)(900,650)))&&a.focus(),a))},[z,el,ew,H,]),ey=(0,i.useCallback)(function(){Q(),X(),"active"===B.value&&e_()},[Q,X,B.value,e_,]),(0,i.useEffect)(function(){J||"waitingForDemoIframeReload"!==B.value||"active"!==Y.presenterModeStatus||G()},[B,Y.presenterModeStatus,G,J,]),(0,i.useEffect)(function(){J||"active"!==B.value||"active"!==Y.presenterModeStatus||null===el||e_()},[J,B.value,Y.presenterModeStatus,e_,el,]),{handleEnablePresenterMode:ey}).handleEnablePresenterMode;return(0,s.jsx)(eL,{state:b,children:(0,s.jsx)(eZ,{onOpenNotesClick:"presenter-mode"===b.mode?eS:eP,onCloseNotesClick:j,onVisibilityTogglerClick:P,state:b})})},eA=function(e){var t,r,o,a,d,g,h,m,v,b,w,_,y,j=(o=(r=(0,i.useReducer)(eo,ea(e)))[0],a=r[1],g=(d=(0,er.z)()).isLoading,h=d.secret,v=(0,i.useCallback)((m=(0,G.Z)(function(t){var r,n,o,s,i,d;return(0,J.__generator)(this,function(n){switch(n.label){case 0:r=t.secret,n.label=1;case 1:return n.trys.push([1,3,,4]),a({type:"requestProject/pending"}),[4,(0,es.Z)({shareId:e.shareId,origin:e.origin,secret:r})];case 2:return a({type:"requestProject/fulfilled",payload:{project:n.sent().project}}),[3,4];case 3:return o=n.sent(),console.error("Error fetching project:",o),Y().isAxiosError(o)&&(0,X.Rp)(null===(s=o.response)||void 0===s?void 0:s.data)&&a({type:"requestProject/rejected",payload:{error:(0,ei.q)({response:null===(i=o.response)||void 0===i?void 0:i.data})}}),[3,4];case 4:return[2]}})}),function(e){return m.apply(this,arguments)}),[e.shareId,e.origin,a]),(0,i.useEffect)(function(){"initializing"!==o.secretStatus||g||h||a({type:"requestSecret/notFound"})},[g,o.secretStatus,h,a]),(0,i.useEffect)(function(){"authIsRequired"===o.pageStatus&&h&&v({secret:h})},[h,v,o.pageStatus]),b=(0,i.useCallback)(function(){a({type:"userEnabledPresenterMode"})},[a]),w=(0,i.useCallback)(function(){a({type:"userEnabledPresenterNotes"})},[a]),_=(0,i.useCallback)(function(){a({type:"presenterModeReloadFinished"})},[a]),{state:o,dispatch:a,onUserEnabledPresenterMode:b,onUserEnabledPresenterNotes:w,onPresenterModeReloadFinished:_}),P=j.state,S=j.onUserEnabledPresenterMode,x=j.onUserEnabledPresenterNotes,I=j.onPresenterModeReloadFinished,E=(0,u.useRouter)().query.id,k=(0,er.z)(),M=k.secret,C=k.openAuthWindow;(0,i.useEffect)(function(){if(window.top!==window.self){var e="Avoid using ".concat(window.location.href," inside the iframe. Correct demo url can be copied from the editor page. Visit: ").concat("https://app.storylane.io");console.error(e)}},[]),y=(0,u.useRouter)().query[n.Debug],(0,i.useEffect)(function(){if(y){var e=function(e){(0,ee.J)(e)&&console.debug('Debug: Cross-Origin "'.concat(e.data.message,'" Message:'),{payload:e.data.payload})};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}},[y]),(0,i.useEffect)(function(){var e=function(e){var t,r,n,o,a,s,i;e.data.message===$.mr&&(null===(t=e.data.payload)||void 0===t?void 0:t.event)===$.rc.OpenedExternalUrl&&(null===(r=e.data.payload)||void 0===r?void 0:r.target.target)==="_self"&&(null===(n=e.data.payload)||void 0===n?void 0:n.target.cta_kind)!==et.Un.MeetingLink&&window.open(e.data.payload.target.url,e.data.payload.target.target),"storylane-page-change-event"===e.data.message&&e.data.payload.pageId&&(o="page_id",a=e.data.payload.pageId,(s=new URLSearchParams(window.location.search)).set(o,a),i=s.toString(),window.history.pushState((0,en.Z)({},o,a),"",window.location.pathname+"?"+i))};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}},[]);var N=(0,u.useRouter)(),Z=(0,R.Z)(N.asPath).toString(),F=(0,ey.$t)({search:Z}),L=N.query[n.DemoSessionId];if(D=L?Array.isArray(L)?null!==(q=L[0])&&void 0!==q?q:(0,f.x0)():null!=L?L:(0,f.x0)():(0,f.x0)(),(0,i.useEffect)(function(){if(!P.project){var t,r=null===(t=e.additionalData)||void 0===t?void 0:t.projectId,n=(0,ej.gP)(E,D);!n.state[eP.QR.Opened]&&r&&E&&(0,eS.gR)({demoId:E,projectId:r,event:eP.QR.Opened,query:F.query,hostUrl:"",urlQuery:"",baseUrl:"https://api.storylane.io/api/v1/",sessionId:n.id})}},[F.query,E,null===(U=e.additionalData)||void 0===U?void 0:U.projectId,P.project,D,]),"authIsRequired"===P.pageStatus)return(0,s.jsx)(ew.Z,{isPending:"pending"===P.projectRequestStatus,isInitializing:"initializing"===P.secretStatus,onSignInClick:C,error:"rejected"===P.secretStatus?"Authentication process failed. Please try again or contact support.":void 0});if(!P.project){var U,D,q,A,W,T=void 0,O=void 0;return(null===(A=P.apiError)||void 0===A?void 0:A.isResourceNotFound)?(T="This demo is no longer live.",O="Demo unavailable"):(null===(W=P.apiError)||void 0===W?void 0:W.isPasswordExpired)&&(T="This interactive demo access has ended.",O="Demo unavailable"),(0,s.jsx)(e_.Z,{testId:"share-not-found",message:T,title:O})}var z=(0,p.n)(P.project.display_config),H=(null==z?void 0:z.renderer_title)||P.project.name,B=!1;return B=P.project.kind===c.lI.Image||!!z&&z.mobile_viewport,(0,s.jsxs)(ec,{state:P,onUserEnabledPresenterMode:S,onUserEnabledPresenterNotes:x,onPresenterModeReloadFinished:I,children:[(0,s.jsxs)(l(),{children:[(0,s.jsx)("title",{children:H}),B?(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}):(0,s.jsx)("meta",{name:"viewport",content:"maximum-scale=1.0"})]}),(0,s.jsx)(eb.Z,{font:P.project.display_config.font}),P.project.kind===c.lI.Html&&(0,s.jsx)(ev,{projectInfo:P.project,shareId:E,secret:M,httpReferer:e.httpReferer}),P.project.kind===c.lI.Image&&(0,s.jsx)(ep,{shareId:E,projectInfo:P.project,whitelabelSettings:P.project.whitelabel,secret:M,httpReferer:e.httpReferer}),(0,s.jsx)(eq,{projectInfo:P.project})]})}},47162:function(e,t,r){"use strict";var n,o,a,s;r.d(t,{L:function(){return o},Y:function(){return n}}),(a=n||(n={})).StorylaneShareUserId="storylane-share-user-id",(s=o||(o={})).RequestUser="storylane-demo-ready"},7463:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(2784);function o(e){var t=e.eventAction,r=e.postMessageAction,o=(0,n.useState)(null),a=o[0],s=o[1],i=(0,n.useCallback)(function(e){var r;(null===(r=e.data)||void 0===r?void 0:r.action)===t&&s(e.data.payload)},[t]);return(0,n.useEffect)(function(){try{var e,t;r&&(null===(t=window.top)||void 0===t||t.postMessage(r,"*")),null==window||null===(e=window.top)||void 0===e||e.addEventListener("message",i)}catch(n){}return function(){try{var e;null==window||null===(e=window.top)||void 0===e||e.removeEventListener("message",i)}catch(t){}}},[t,i,r]),{eventData:a}}},72125:function(e,t,r){"use strict";var n=r(78617),o=function(e){var t,r,o=e.shareId,a=e.additionalQuery,s=e.userIP,i=e.userAgent,d=e.origin,l=e.secret;return n.b.get((t=new URLSearchParams,l&&t.set("secret",l),r=t.toString(),"shared/projects/".concat(o,"/info")+(r?"?".concat(r):"")),{headers:{Origin:d,additionalQuery:a,"X-Forwarded-For":s||"","X-User-Agent":i||""}}).then(function(e){return e.data})};t.Z=o},83564:function(e,t,r){"use strict";function n(e){var t=e.displayConfigRendererDimensions,r=e.startPageDimensions,n=e.queryFlagScale,o=e.projectFlagScale;if(!(null===n?o:n))return!1;var a,s=(a=t||r,a.width>0&&a.height>0);return s||console.warn("Fallback embed dimensions with default values."),s}r.d(t,{w:function(){return n}})},60281:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(52322),o=r(2784),a=r(87093),s=r(59911),i=function(e){var t=e.url,r=e.onSetIFrame,i=e.isBorderless,d=e.testId,l=e.id,c=e.onBeforeUnload,u=e.onLoad,p=(0,o.useMemo)(function(){return i?{position:"relative",width:"100%",height:"100%"}:{position:"relative",paddingBottom:a.Uh,width:"100%",height:0,transform:"scale(0.8)"}},[i]),f=(0,o.useCallback)(function(e){e&&(u&&e.addEventListener("load",u),c&&e.addEventListener("beforeunload",c),e.focus()),null==r||r(e)},[c,u,r]);return(0,n.jsx)("div",{style:p,id:l,children:(0,n.jsx)("iframe",{src:t,"data-testid":d,allow:"fullscreen",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",border:"none"},name:s.Lu,ref:f})})}},72524:function(e,t,r){"use strict";r.d(t,{Z:function(){return n.Z},L:function(){return p}});var n=r(73697),o=r(87394),a=r(2784),s=r(71301),i=r.n(s),d=r(18206),l=r(92800),c=r(59911),u=r(17731),p=function(e){var t=e.data,r=(0,o.Z)((0,d.x)(),2),n=r[0],s=r[1],p=(0,a.useState)(!0),f=p[0],g=p[1],h=(0,a.useRef)(s);f&&(h.current=s),(0,a.useEffect)(function(){if(i().isEnabled){var e=function(e){alert("Failed to enable fullscreen, reason: ".concat(e))},t=function(){if(!i().isFullscreen)return setTimeout(function(){return g(i().isFullscreen)},300);g(!1)};return i().on("error",e),i().on("change",t),function(){i().off("error",e),i().off("change",t)}}},[]);var m,v=(0,l.dr)(t.display_config.renderer_border_color),b=(0,u.u)(t.display_config,t.dimensions),w=b.width/b.height,_=Math.floor(Math.min(w*(h.current.height-(t.isResponsive?c.eh+l.n4+l.K:v.top+v.bottom)),b.width+v.left+v.right));return[n,{width:"min(".concat(_,"px, 100%)")}]}},28135:function(e,t,r){"use strict";r.d(t,{A:function(){return n}});var n=function(e){var t=e.shareId,r=e.path,n=e.baseUrl,o=e.search;return"".concat(n,"/").concat(r,"/").concat(t).concat(void 0===o?"":o)}},84868:function(e){e.exports={root:"ShareImageLandscapeLayout_root__uBZc0",footer:"ShareImageLandscapeLayout_footer__zPmb4",body:"ShareImageLandscapeLayout_body__06cue"}},70154:function(e){e.exports={root:"ShareImagePortraitLayout_root__RjS3f",header:"ShareImagePortraitLayout_header__YRFtO",body:"ShareImagePortraitLayout_body__a7KO4"}},64050:function(e){e.exports={root:"SharePageImageHeader_root__cd4H8",title:"SharePageImageHeader_title__kU_bP",logo:"SharePageImageHeader_logo__tuU7Y",logoContainer:"SharePageImageHeader_logoContainer__7W9cg",linkContainer:"SharePageImageHeader_linkContainer__OYogP",link:"SharePageImageHeader_link__7Zqfq"}},87939:function(e){e.exports={logo:"ShareStorylaneDefaultLogo_logo__6Ado6"}},54455:function(e){e.exports={headerLink:"ShareWhitelabel_headerLink__bS5WB",icon:"ShareWhitelabel_icon__iHGKR"}},13949:function(e){e.exports={root:"SharePageHtml_root__rP8KM",embedDemoContainer:"SharePageHtml_embedDemoContainer__9Sn9t"}},746:function(e){e.exports={embedDemoContainerInner:"SharePageImage_embedDemoContainerInner__47Koq",embedDemoWrapper:"SharePageImage_embedDemoWrapper__WzGA0"}},85888:function(e){e.exports={root:"PresenterNotesPopupLegacy_root___C_ZP",loadingOverlay:"PresenterNotesPopupLegacy_loadingOverlay__D_19c",loadingSpinner:"PresenterNotesPopupLegacy_loadingSpinner__QBEIs",title:"PresenterNotesPopupLegacy_title__Sx0lv",content:"PresenterNotesPopupLegacy_content__eqpE_",buttonWrapper:"PresenterNotesPopupLegacy_buttonWrapper__2ZiIE",visibleIconWrapper:"PresenterNotesPopupLegacy_visibleIconWrapper__svKRS",visibleText:"PresenterNotesPopupLegacy_visibleText__avW7f",eyeIcon:"PresenterNotesPopupLegacy_eyeIcon__Sq_fO"}},539:function(e){e.exports={root:"PresenterNotesToggler_root__mKS_x"}},71301:function(e){!/*!
* screenfull
* v5.2.0 - 2021-11-03
* (c) Sindre Sorhus; MIT License
*/ function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},r=e.exports,n=function(){for(var e,r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,o=r.length,a={};n<o;n++)if((e=r[n])&&e[1]in t){for(n=0;n<e.length;n++)a[r[0][n]]=e[n];return a}return!1}(),o={change:n.fullscreenchange,error:n.fullscreenerror},a={request:function(e,r){return new Promise((function(o,a){var s=(function(){this.off("change",s),o()}).bind(this);this.on("change",s);var i=(e=e||t.documentElement)[n.requestFullscreen](r);i instanceof Promise&&i.then(s).catch(a)}).bind(this))},exit:function(){return new Promise((function(e,r){if(!this.isFullscreen){e();return}var o=(function(){this.off("change",o),e()}).bind(this);this.on("change",o);var a=t[n.exitFullscreen]();a instanceof Promise&&a.then(o).catch(r)}).bind(this))},toggle:function(e,t){return this.isFullscreen?this.exit():this.request(e,t)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,r){var n=o[e];n&&t.addEventListener(n,r,!1)},off:function(e,r){var n=o[e];n&&t.removeEventListener(n,r,!1)},raw:n};if(!n){r?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(a,{isFullscreen:{get:function(){return Boolean(t[n.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[n.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[n.fullscreenEnabled])}}}),r?e.exports=a:window.screenfull=a}()}}]);