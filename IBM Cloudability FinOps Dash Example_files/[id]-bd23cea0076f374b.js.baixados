(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[69859],{55346:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/demo/[id]",function(){return n(83630)}])},83630:function(e,r,n){"use strict";n.r(r),n.d(r,{__N_SSP:function(){return M},default:function(){return B}});var t=n(98788),o=n(70865),s=n(96670),i=n(22970),a=n(52322),c=n(2784),l=n(25237),u=n.n(l),d=n(97729),f=n.n(d),p=n(82214),m=n(66680),h=n(9669),g=n.n(h),w=n(2536),v=n(5632),E=n(81761),j=n(23089),b=n(85153),Z=n(22291),y=n(75762),x=n(34448),S=n(42051),C=n(27421),_=n(98437),P=n(36260),I=n(82998),R=n(10509),k=n(35138),q=n(50930),D=n(78095),N=n(6899),z=n(87093),O=n(50161),A=new N.fK.Entity("widgets",{},{processStrategy:function(e,r){var n,t;return(0,s.Z)((0,o.Z)({},(0,O.B)((0,O.ox)(e))),{projectId:null!==(n=r.projectId)&&void 0!==n?n:e.projectId,flowId:null!==(t=r.id)&&void 0!==t?t:e.flowId})}}),T=new N.fK.Entity("flows",{widgets:[A]},{processStrategy:function(e,r){return(0,s.Z)((0,o.Z)({},e),{projectId:r.projectId})}}),F=n(75782),U=n(78617),Q=new N.fK.Entity("projects",{flows:[T]}),X=function(e){var r=e.demoId,n=e.password,t=e.requiredEmail,i=e.requiredEmailCode,a=e.additionalQuery,c=e.userIP,l=e.userAgent,u=e.origin,d=e.secret,f=new URLSearchParams;t&&f.set("email",t),i&&f.set("code",i),d&&f.set("secret",d);var p=f.toString(),m="shared/projects/".concat(r)+(p?"?".concat(p):"");return U.b.get(m,{headers:{Authorization:n?"Bearer ".concat(n):"",Origin:u,additionalQuery:a,"X-Forwarded-For":c||"","X-User-Agent":l||""},transformResponse:(0,q.Z)(g().defaults.transformResponse).concat([function(e){return(0,D.S)(e)?e:function(e){if(e.project.kind===z.lI.Image)try{e.project.pages=e.project.pages.map(function(e){var r=(0,o.Z)({},e);return r.scale_config||(r.scale_config=(0,o.Z)({},F.Oe)),r})}catch(r){console.error("Error transforming image project response - scale config default value not assigned ",r)}try{var n=new Set,t=new Set;e.project.flows.forEach(function(e){n.add(e.id),e.widgets.forEach(function(e){t.add(e.id)})}),e.project.flows=e.project.flows.map(function(e){return(0,s.Z)((0,o.Z)({},e),{widgets:e.widgets.map(function(e){return(0,O.k5)(e,n,t)})})})}catch(i){console.error("Error transforming shared project response - html / image project - cta pointing to non existing flows not validated ",i)}try{e.project.flows=e.project.flows.map(function(e){return(0,s.Z)((0,o.Z)({},e),{widgets:e.widgets.map(function(e){return(0,s.Z)((0,o.Z)({},e),{media_duration:(0,O.ad)(e)})})})})}catch(a){console.error("Error transforming shared project response - media duration not updated",a)}return(0,N.Fv)(e,{project:Q})}(e)},])})},K=u()(function(){return Promise.all([n.e(9137),n.e(78426)]).then(n.bind(n,78426))},{loadableGenerated:{webpack:function(){return[78426]}},ssr:!0}),M=!0,B=function(e){var r,n=e.demoId,l=e.ssEmail,u=e.ssResponseDataStr,d=e.ssResponseErrorCode,h=(e.ssResponseErrorDescription,e.baseUrl),q=e.additionalData,D=e.ssParentPageType,N=e.httpReferer,z=e.demoSessionId,O="string"==typeof u?JSON.parse(u):null,A=(0,c.useState)(O),T=A[0],F=A[1],U=(0,c.useState)((0,y.q)({code:d,description:""})),Q=U[0],M=U[1],B=Q.isPasswordProtected,L=Q.isPasswordExpired,G=Q.isResourceNotFound,J=Q.isEmailProtected,V=Q.isEmailConfirmationRequired,W=Q.isEmailConfirmationCodeInvalid,$=Q.isNotAuthenticated,H=Q.errorDescription,Y=(0,c.useState)(!1),ee=Y[0],er=Y[1];(0,P.Xm)();var en,et,eo,es,ei=(0,c.useCallback)((r=(0,t.Z)(function(e){var r,t,o,s,a,c,l,u,d;return(0,i.__generator)(this,function(i){switch(i.label){case 0:r=e.hashedPassword,t=e.email,o=e.emailCode,s=e.secret,i.label=1;case 1:return i.trys.push([1,3,,4]),er(!0),[4,X({demoId:n,password:r,requiredEmail:t,requiredEmailCode:o,secret:s,origin:h})];case 2:return F({data:i.sent().data}),M((0,y.q)({})),er(!1),[2,{isSuccess:!0,error:void 0}];case 3:if(c=i.sent(),er(!1),g().isAxiosError(c)&&(0,m.Rp)(null===(l=c.response)||void 0===l?void 0:l.data))return[2,{isSuccess:!1,error:(0,y.q)({response:null===(u=c.response)||void 0===u?void 0:u.data})}];return console.error(c),[2,{isSuccess:!1,error:void 0}];case 4:return[2]}})}),function(e){return r.apply(this,arguments)}),[h,n]),ea=(0,c.useCallback)((en=(0,t.Z)(function(e){var r,t,o,s,a;return(0,i.__generator)(this,function(i){switch(i.label){case 0:return t=btoa(e),o=(0,x.Mo)(n),s=(0,x.Zf)(n),[4,ei({hashedPassword:t,email:o,emailCode:s})];case 1:return((a=i.sent()).isSuccess||(null===(r=a.error)||void 0===r?void 0:r.isEmailProtected))&&(0,x.Vq)(n,t),a.error&&(a.error.isEmailProtected&&(a.error.errorDescription=""),M(a.error)),[2]}})}),function(e){return en.apply(this,arguments)}),[n,ei]),ec=(0,c.useCallback)((et=(0,t.Z)(function(e){var r,t,o;return(0,i.__generator)(this,function(s){switch(s.label){case 0:return t=(0,x.lI)(n),[4,ei({hashedPassword:t,email:e})];case 1:return((o=s.sent()).isSuccess||(null===(r=o.error)||void 0===r?void 0:r.isEmailConfirmationRequired))&&(0,x.dy)(n,e),o.error&&(o.error.isEmailConfirmationRequired&&(o.error.errorDescription=""),M(o.error)),[2]}})}),function(e){return et.apply(this,arguments)}),[n,ei]),el=(0,c.useCallback)((eo=(0,t.Z)(function(e){var r,t,o;return(0,i.__generator)(this,function(s){switch(s.label){case 0:return r=(0,x.lI)(n),t=(0,x.Mo)(n),[4,ei({hashedPassword:r,email:t,emailCode:e})];case 1:return(o=s.sent()).isSuccess&&(0,x.ku)(n,e),o.error&&M(o.error),[2]}})}),function(e){return eo.apply(this,arguments)}),[n,ei]),eu=(0,c.useCallback)((0,t.Z)(function(){var e,r;return(0,i.__generator)(this,function(t){switch(t.label){case 0:return e=(0,x.lI)(n),r=(0,x.Mo)(n),[4,ei({hashedPassword:e,email:r})];case 1:return t.sent(),[2]}})}),[n,ei]),ed=(0,c.useCallback)((es=(0,t.Z)(function(e){var r;return(0,i.__generator)(this,function(n){switch(n.label){case 0:return[4,ei({secret:e})];case 1:return(r=n.sent()).error&&M(r.error),[2,r]}})}),function(e){return es.apply(this,arguments)}),[ei]),ef=(0,c.useCallback)(function(){M((0,s.Z)((0,o.Z)({},Q),{errorDescription:""}))},[Q,M]),ep=(0,c.useCallback)(function(){(0,x.bl)(n),globalThis.location.reload()},[n]),em=(0,C.z)(),eh=em.isLoading,eg=em.secret,ew=em.openAuthWindow,ev=(0,c.useState)($),eE=ev[0],ej=ev[1];(0,c.useEffect)(function(){!$||eg||eh||ej(!1)},[$,eg,eh]),(0,c.useEffect)(function(){$&&eg&&ed(eg).then(function(){ej(!1)})},[$,eg,ed]);var eb=(0,v.useRouter)(),eZ=(0,I.Z)(eb.asPath).toString(),ey=(0,P.$t)({search:eZ});if((0,c.useEffect)(function(){if(!T){var e=(0,x.gP)(n,z),r=null==q?void 0:q.projectId;!e.state[R.QR.Opened]&&r&&n&&(0,k.gR)({demoId:n,projectId:r,event:R.QR.Opened,query:ey.query,hostUrl:"",urlQuery:"",baseUrl:"https://api.storylane.io/api/v1/",sessionId:e.id})}},[n,ey.query,z,null==q?void 0:q.projectId,T,]),$)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f(),{children:(0,p.Z)({isResponsiveDemoPlayerEnabled:!1,htmlClassName:"sl-player-html"})}),(0,a.jsx)(E.Z,{font:null}),(0,a.jsx)(S.Z,{isInitializing:eE,isPending:ee,onSignInClick:ew,error:eg?"Authentication process failed. Please try again or contact support.":""})]});if(B||J||V||W){var ex=null;if(B)ex=(0,a.jsx)(j.Z,{isSubmitting:ee,onSubmit:ea,error:H,onClearError:ef});else if(J)ex=(0,a.jsx)(b.Z,{isSubmitting:ee,onSubmit:ec,error:H,onClearError:ef,recordKind:w.Z.Demo});else if(V||W){var eS=(0,x.Mo)(n)||l;ex=(0,a.jsx)(Z.Z,{isSubmitting:ee,onSubmit:el,error:H,onClearError:ef,email:eS,onClose:ep,onResendCode:eu})}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f(),{children:(0,p.Z)({isResponsiveDemoPlayerEnabled:!1,htmlClassName:"sl-player-html"})}),(0,a.jsx)(E.Z,{font:null}),ex]})}return L?(0,a.jsx)(_.Z,{message:"This interactive demo access has ended.",title:"Demo unavailable"}):G?(0,a.jsx)(_.Z,{message:"This demo is no longer live.",title:"Demo unavailable"}):T?(0,a.jsx)(K,{baseUrl:h,httpReferer:N,responseData:T.data,demoId:n,ssParentPageType:D,demoSessionId:z}):(0,a.jsx)(_.Z,{})}},82214:function(e,r,n){"use strict";n.d(r,{Z:function(){return s}});var t=n(52322),o=n(59911),s=function(e){var r=e.isResponsiveDemoPlayerEnabled,n=e.htmlClassName,s="max-width: 1230px";r&&(s="min-width: ".concat(o.d+1,"px"));var i="\n      @media (".concat(s,") {\n        @media only screen and (min-aspect-ratio: 1/1) { \n          html, .").concat(n," {\n            font-size: max(4px, 1.3vw);\n          }\n        }\n      }"),a="\n      @media (min-width: 1231px) and (max-width: 1900px) {\n        html, .".concat(n," {\n          font-size: 16px;\n        }\n      }"),c="\n      @media (min-width: 1901px){\n        html, .".concat(n," {\n          font-size: 20px;\n          font-size: min(20px, 1vw);\n        }\n      }\n    "),l="       \n      @media only screen and (max-aspect-ratio: 1/1){\n        html, .".concat(n," {\n          font-size: 16px;\n        }\n      }"),u=[i,a,c,l,].join("\n");return(0,t.jsx)("style",{type:"text/css",children:u})}}},function(e){e.O(0,[69859],function(){e.E(69657),e.E(86522)},5),e.O(0,[43378,54537,41201,23807,97757,21615,80360,46186,24408,14308,89321,64533,83803,32550,21954,49774,92888,40179],function(){return e(e.s=55346)}),_N_E=e.O()}]);